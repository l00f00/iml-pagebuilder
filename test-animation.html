<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lottie Animation Test</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: monospace;
            overflow: hidden; /* Prevent scrollbars */
        }
        #lottie-container {
            width: 100vw;
            height: 100vh;
            border: none;
            display: block;
        }
        #debug-info {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.8);
            color: #0f0;
            padding: 10px;
            border-radius: 5px;
            pointer-events: none;
            z-index: 100;
        }
    </style>
</head>
<body>

    <div id="debug-info">
        Status: Waiting...<br>
        Frames: -<br>
        Duration: -
    </div>

    <div id="lottie-container"></div>

    <script>
        var container = document.getElementById('lottie-container');
        var debugEl = document.getElementById('debug-info');
        
        function log(msg) {
            console.log(msg);
            debugEl.innerHTML += '<br>' + msg;
        }

        var anim = lottie.loadAnimation({
            container: container,
            renderer: 'svg',
            loop: false,
            autoplay: false,
            path: './frontend/assets/new.json', // Relative path
            rendererSettings: {
                preserveAspectRatio: 'none' // STRETCH to fill container
            }
        });

        anim.addEventListener('DOMLoaded', function() {
            var duration = anim.totalFrames / anim.frameRate;
            log('DOM Loaded');
            log('Total Frames: ' + anim.totalFrames);
            log('Frame Rate: ' + anim.frameRate);
            log('Calculated Duration: ' + duration.toFixed(2) + 's');
            
            // Check for segments/markers
            // Note: Lottie doesn't always expose 'segments' directly unless defined in markers.
            // We will inspect the animation data if possible.
            if (anim.animationData && anim.animationData.markers) {
                 log('Markers found: ' + anim.animationData.markers.length);
                 anim.animationData.markers.forEach(function(marker) {
                     log('Marker: ' + marker.cm + ' (Time: ' + marker.tm + ', Duration: ' + marker.dr + ')');
                 });
            } else {
                log('No markers found in animation data.');
            }

            // Start simple play without segments
            log('Starting animation with .play()...');
            anim.play();
        });

        anim.addEventListener('complete', function() {
            log('EVENT: complete fired!');
        });

        anim.addEventListener('loopComplete', function() {
            log('EVENT: loopComplete');
        });

        anim.addEventListener('enterFrame', function(e) {
            // Optional: log every second or so to avoid spam
            // if (Math.round(e.currentTime) % 24 === 0) console.log(e.currentTime);
        });
        
        anim.addEventListener('error', function(e) {
            log('ERROR: ' + e);
        });
        
        anim.addEventListener('data_failed', function() {
            log('ERROR: Data Failed');
        });

    </script>
</body>
</html>